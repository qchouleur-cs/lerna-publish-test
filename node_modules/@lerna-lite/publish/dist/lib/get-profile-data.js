"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getProfileData = void 0;
const npm_registry_fetch_1 = __importDefault(require("npm-registry-fetch"));
const core_1 = require("@lerna-lite/core");
/**
 * Retrieve profile data of logged-in user.
 * @param {import("./fetch-config").FetchConfig} opts
 * @returns {Promise<ProfileData>}
 */
async function getProfileData(opts) {
    opts.log.verbose('', 'Retrieving npm user profile');
    const data = await (0, core_1.pulseTillDone)(await npm_registry_fetch_1.default.json('/-/npm/v1/user', opts));
    opts.log.silly('npm profile get', 'received %j', data);
    return Object.assign(
    // remap to match legacy whoami format
    { username: data.name }, data);
}
exports.getProfileData = getProfileData;
//# sourceMappingURL=get-profile-data.js.map